'\" t
.\"     Title: ALTER ROLE
.\"    Author: The PostgreSQL Global Development Group
.\" Generator: DocBook XSL Stylesheets v1.75.1 <http://docbook.sf.net/>
.\"      Date: 2009-12-01
.\"    Manual: PostgreSQL snapshot Documentation
.\"    Source: PostgreSQL snapshot
.\"  Language: English
.\"
.TH "ALTER ROLE" "7" "2009-12-01" "PostgreSQL snapshot" "PostgreSQL snapshot Documentation"
.\" -----------------------------------------------------------------
.\" * set default formatting
.\" -----------------------------------------------------------------
.\" disable hyphenation
.nh
.\" disable justification (adjust text to left margin only)
.ad l
.\" -----------------------------------------------------------------
.\" * MAIN CONTENT STARTS HERE *
.\" -----------------------------------------------------------------
.SH "NAME"
ALTER_ROLE \- change a database role
.\" ALTER ROLE
.SH "SYNOPSIS"
.sp
.nf
ALTER ROLE \fIname\fR [ [ WITH ] \fIoption\fR [ \&.\&.\&. ] ]

where \fIoption\fR can be:
    
      SUPERUSER | NOSUPERUSER
    | CREATEDB | NOCREATEDB
    | CREATEROLE | NOCREATEROLE
    | CREATEUSER | NOCREATEUSER
    | INHERIT | NOINHERIT
    | LOGIN | NOLOGIN
    | CONNECTION LIMIT \fIconnlimit\fR
    | [ ENCRYPTED | UNENCRYPTED ] PASSWORD \(aq\fIpassword\fR\(aq
    | VALID UNTIL \(aq\fItimestamp\fR\(aq 

ALTER ROLE \fIname\fR RENAME TO \fInew_name\fR

ALTER ROLE \fIname\fR [ IN DATABASE \fIdatabase_name\fR ] SET \fIconfiguration_parameter\fR { TO | = } { \fIvalue\fR | DEFAULT }
ALTER ROLE \fIname\fR [ IN DATABASE \fIdatabase_name\fR ] SET \fIconfiguration_parameter\fR FROM CURRENT
ALTER ROLE \fIname\fR [ IN DATABASE \fIdatabase_name\fR ] RESET \fIconfiguration_parameter\fR
ALTER ROLE \fIname\fR [ IN DATABASE \fIdatabase_name\fR ] RESET ALL
.fi
.SH "DESCRIPTION"
.PP
ALTER ROLE
changes the attributes of a
PostgreSQL
role\&.
.PP
The first variant of this command listed in the synopsis can change many of the role attributes that can be specified in
CREATE ROLE\&. (All the possible attributes are covered, except that there are no options for adding or removing memberships; use
GRANT
and
REVOKE
for that\&.) Attributes not mentioned in the command retain their previous settings\&. Database superusers can change any of these settings for any role\&. Roles having
CREATEROLE
privilege can change any of these settings, but only for non\-superuser roles\&. Ordinary roles can only change their own password\&.
.PP
The second variant changes the name of the role\&. Database superusers can rename any role\&. Roles having
CREATEROLE
privilege can rename non\-superuser roles\&. The current session user cannot be renamed\&. (Connect as a different user if you need to do that\&.) Because
MD5\-encrypted passwords use the role name as cryptographic salt, renaming a role clears its password if the password is
MD5\-encrypted\&.
.PP
The remaining variants change a role\(aqs session default for a configuration variable for all databases or, when the
IN DATABASE
clause is specified, for the named database\&. Whenever the role subsequently starts a new session, the specified value becomes the session default, overriding whatever setting is present in
postgresql\&.conf
or has been received from the postgres command line\&. This only happens at login time, so configuration settings associated with a role to which you\(aqve
SET ROLE
will be ignored\&. Settings set to a role directly are overridden by any database specific settings attached to a role\&. Superusers can change anyone\(aqs session defaults\&. Roles having
CREATEROLE
privilege can change defaults for non\-superuser roles\&. Certain variables cannot be set this way, or can only be set if a superuser issues the command\&.
.SH "PARAMETERS"
.PP
\fIname\fR
.RS 4
The name of the role whose attributes are to be altered\&.
.RE
.PP
SUPERUSER, NOSUPERUSER, CREATEDB, NOCREATEDB, CREATEROLE, NOCREATEROLE, CREATEUSER, NOCREATEUSER, INHERIT, NOINHERIT, LOGIN, NOLOGIN, CONNECTION LIMIT \fIconnlimit\fR, PASSWORD \fIpassword\fR, ENCRYPTED, UNENCRYPTED, VALID UNTIL \(aq\fItimestamp\fR\(aq
.RS 4
These clauses alter attributes originally set by
CREATE ROLE\&. For more information, see the
CREATE ROLE
reference page\&.
.RE
.PP
\fInew_name\fR
.RS 4
The new name of the role\&.
.RE
.PP
\fIdatabase_name\fR
.RS 4
The name of the database the configuration variable should be set in\&.
.RE
.PP
\fIconfiguration_parameter\fR, \fIvalue\fR
.RS 4
Set this role\(aqs session default for the specified configuration parameter to the given value\&. If
\fIvalue\fR
is
DEFAULT
or, equivalently,
RESET
is used, the role\-specific variable setting is removed, so the role will inherit the system\-wide default setting in new sessions\&. Use
RESET ALL
to clear all role\-specific settings\&.
SET FROM CURRENT
saves the session\(aqs current value of the parameter as the role\-specific value\&. If used in conjunction with
IN DATABASE, the configuration parameter is set or removed for the given role and database only\&.
.sp
Role\-specific variable setting take effect only at login;
SET ROLE
does not process role\-specific variable settings\&.
.sp
See
SET
and
Chapter 18, Server Configuration, in the documentation
for more information about allowed parameter names and values\&.
.RE
.SH "NOTES"
.PP
Use
CREATE ROLE
to add new roles, and
DROP ROLE
to remove a role\&.
.PP
ALTER ROLE
cannot change a role\(aqs memberships\&. Use
GRANT
and
REVOKE
to do that\&.
.PP
Caution must be exercised when specifying an unencrypted password with this command\&. The password will be transmitted to the server in cleartext, and it might also be logged in the client\(aqs command history or the server log\&.
psql
contains a command
\epassword
that can be used to safely change a role\(aqs password\&.
.PP
It is also possible to tie a session default to a specific database rather than to a role; see
ALTER DATABASE\&. If there is a conflict, database\-role\-specific settings override role\-specific ones, which in turn override database\-specific ones\&.
.SH "EXAMPLES"
.PP
Change a role\(aqs password:
.sp
.if n \{\
.RS 4
.\}
.nf
ALTER ROLE davide WITH PASSWORD \(aqhu8jmn3\(aq;
.fi
.if n \{\
.RE
.\}
.PP
Remove a role\(aqs password:
.sp
.if n \{\
.RS 4
.\}
.nf
ALTER ROLE davide WITH PASSWORD NULL;
.fi
.if n \{\
.RE
.\}
.PP
Change a password expiration date, specifying that the password should expire at midday on 4th May 2015 using the time zone which is one hour ahead of
UTC:
.sp
.if n \{\
.RS 4
.\}
.nf
ALTER ROLE chris VALID UNTIL \(aqMay 4 12:00:00 2015 +1\(aq;
.fi
.if n \{\
.RE
.\}
.PP
Make a password valid forever:
.sp
.if n \{\
.RS 4
.\}
.nf
ALTER ROLE fred VALID UNTIL \(aqinfinity\(aq;
.fi
.if n \{\
.RE
.\}
.PP
Give a role the ability to create other roles and new databases:
.sp
.if n \{\
.RS 4
.\}
.nf
ALTER ROLE miriam CREATEROLE CREATEDB;
.fi
.if n \{\
.RE
.\}
.PP
Give a role a non\-default setting of the
maintenance_work_mem
parameter:
.sp
.if n \{\
.RS 4
.\}
.nf
ALTER ROLE worker_bee SET maintenance_work_mem = 100000;
.fi
.if n \{\
.RE
.\}
.PP
Give a role a non\-default, database\-specific setting of the
client_min_messages
parameter:
.sp
.if n \{\
.RS 4
.\}
.nf
ALTER ROLE fred IN DATABASE devel SET client_min_messages = DEBUG;
.fi
.if n \{\
.RE
.\}
.SH "COMPATIBILITY"
.PP
The
ALTER ROLE
statement is a
PostgreSQL
extension\&.
.SH "SEE ALSO"
CREATE ROLE, DROP ROLE, SET
